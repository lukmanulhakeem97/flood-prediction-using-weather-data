import unittest

from mock import patch
from unittest import main, TestCase
from unittest.mock import Mock
from openmeteo_py import Hourly,OWmanager,Options



class APITest(unittest.TestCase):

    @patch('openmeteo_py.OWmanager.get_data')
    
    def test_wrapped_example(self):
        # Set the response content you want to test against

        mock_request_text = "{'2021-10-14T00:00': 17, '2021-10-14T01:00': 9, '2021-10-14T02:00': 0, '2021-10-14T03:00': 0, '2021-10-14T04:00': 0, '2021-10-14T05:00': 0, '2021-10-14T06:00': 0, '2021-10-14T07:00': 0, '2021-10-14T08:00': 0, '2021-10-14T09:00': 0, '2021-10-14T10:00': 0, '2021-10-14T11:00': 0, '2021-10-14T12:00': 0, '2021-10-14T13:00': 0, '2021-10-14T14:00': 0, '2021-10-14T15:00': 0, '2021-10-14T16:00': 0, '2021-10-14T17:00': 0, '2021-10-14T18:00': 0, '2021-10-14T19:00': 0, '2021-10-14T20:00': 5, '2021-10-14T21:00': 8, '2021-10-14T22:00': 20, '2021-10-14T23:00': 21, '2021-10-15T00:00': 10, '2021-10-15T01:00': 0, '2021-10-15T02:00': 0, '2021-10-15T03:00': 0, '2021-10-15T04:00': 0, '2021-10-15T05:00': 0, '2021-10-15T06:00': 0, '2021-10-15T07:00': 0, '2021-10-15T08:00': 0, '2021-10-15T09:00': 0, '2021-10-15T10:00': 0, '2021-10-15T11:00': 0, '2021-10-15T12:00': 11, '2021-10-15T13:00': 0, '2021-10-15T14:00': 24, '2021-10-15T15:00': 6, '2021-10-15T16:00': 56, '2021-10-15T17:00': 9, '2021-10-15T18:00': 0, '2021-10-15T19:00': 7, '2021-10-15T20:00': 3, '2021-10-15T21:00': 0, '2021-10-15T22:00': 23, '2021-10-15T23:00': 0, '2021-10-16T00:00': 0, '2021-10-16T01:00': 0, '2021-10-16T02:00': 40, '2021-10-16T03:00': 15, '2021-10-16T04:00': 0, '2021-10-16T05:00': 2, '2021-10-16T06:00': 0, '2021-10-16T07:00': 0, '2021-10-16T08:00': 0, '2021-10-16T09:00': 0, '2021-10-16T10:00': 0, '2021-10-16T11:00': 0, '2021-10-16T12:00': 0, '2021-10-16T13:00': 0, '2021-10-16T14:00': 0, '2021-10-16T15:00': 0, '2021-10-16T16:00': 0, '2021-10-16T17:00': 0, '2021-10-16T18:00': 0, '2021-10-16T19:00': 0, '2021-10-16T20:00': 20, '2021-10-16T21:00': 0, '2021-10-16T22:00': 0, '2021-10-16T23:00': 0, '2021-10-17T00:00': 0, '2021-10-17T01:00': 0, '2021-10-17T02:00': 0, '2021-10-17T03:00': 0, '2021-10-17T04:00': 0, '2021-10-17T05:00': 0, '2021-10-17T06:00': 0, '2021-10-17T07:00': 0, '2021-10-17T08:00': 0, '2021-10-17T09:00': 0, '2021-10-17T10:00': 0, '2021-10-17T11:00': 0, '2021-10-17T12:00': 0, '2021-10-17T13:00': 2, '2021-10-17T14:00': 5, '2021-10-17T15:00': 7, '2021-10-17T16:00': 11, '2021-10-17T17:00': 14, '2021-10-17T18:00': 18, '2021-10-17T19:00': 32, '2021-10-17T20:00': 46, '2021-10-17T21:00': 60, '2021-10-17T22:00': 40, '2021-10-17T23:00': 20, '2021-10-18T00:00': 0, '2021-10-18T01:00': 0, '2021-10-18T02:00': 0, '2021-10-18T03:00': 0, '2021-10-18T04:00': 0, '2021-10-18T05:00': 0, '2021-10-18T06:00': 0, '2021-10-18T07:00': 0, '2021-10-18T08:00': 1, '2021-10-18T09:00': 1, '2021-10-18T10:00': 9, '2021-10-18T11:00': 17, '2021-10-18T12:00': 26, '2021-10-18T13:00': 26, '2021-10-18T14:00': 27, '2021-10-18T15:00': 27, '2021-10-18T16:00': 18, '2021-10-18T17:00': 9, '2021-10-18T18:00': 0, '2021-10-18T19:00': 0, '2021-10-18T20:00': 0, '2021-10-18T21:00': 0, '2021-10-18T22:00': 0, '2021-10-18T23:00': 0, '2021-10-19T00:00': 0, '2021-10-19T01:00': 0, '2021-10-19T02:00': 0, '2021-10-19T03:00': 0, '2021-10-19T04:00': 0, '2021-10-19T05:00': 0, '2021-10-19T06:00': 0, '2021-10-19T07:00': 0, '2021-10-19T08:00': 0, '2021-10-19T09:00': 0, '2021-10-19T10:00': 0, '2021-10-19T11:00': 0, '2021-10-19T12:00': 0, '2021-10-19T13:00': 0, '2021-10-19T14:00': 0, '2021-10-19T15:00': 0, '2021-10-19T16:00': 0, '2021-10-19T17:00': 0, '2021-10-19T18:00': 0, '2021-10-19T19:00': 0, '2021-10-19T20:00': 0, '2021-10-19T21:00': 0, '2021-10-19T22:00': 0, '2021-10-19T23:00': 0, '2021-10-20T00:00': 0, '2021-10-20T01:00': 0, '2021-10-20T02:00': 0, '2021-10-20T03:00': 0, '2021-10-20T04:00': 0, '2021-10-20T05:00': 0, '2021-10-20T06:00': 0, '2021-10-20T07:00': 0, '2021-10-20T08:00': 0, '2021-10-20T09:00': 0, '2021-10-20T10:00': 0, '2021-10-20T11:00': 0, '2021-10-20T12:00': 0, '2021-10-20T13:00': 0, '2021-10-20T14:00': 0, '2021-10-20T15:00': 0, '2021-10-20T16:00': 0, '2021-10-20T17:00': 0, '2021-10-20T18:00': 0, '2021-10-20T19:00': 0, '2021-10-20T20:00': 0, '2021-10-20T21:00': 0, '2021-10-20T22:00': 0}"

        latitude = 33.9842
        longitude = -6.8675
        hourly = Hourly()
        options = Options(latitude,longitude)
        mgr = OWmanager(options,
        hourly.cloudcover_mid())

        # Make your request

        response = mgr.get_data(1,1,"/home/morpheus/openmeteopy/output")
        
        # Test the result.
        
        self.assertTrue(mock_request_text == str(response))

if __name__ == '__main__':
    unittest.main()

#APITest.test_wrapped_example()